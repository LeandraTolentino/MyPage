<!DOCTYPE html>
<html>
<head>
    <title>Inflation Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #inflationChart, #eloChart {
            width: 100%;
            max-width: 600px;
            height: 400px;
            margin: auto;
        }
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            margin: 0;
        }
        .main-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .calculator-container {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
        }
        .image-container {
            text-align: center;
        }
        .text-box {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #fff;
        }
        input, button { 
            padding: 8px; 
            margin: 5px;
            width: 200px;
        }
        .result { 
            margin-top: 20px; 
            font-weight: bold;
        }
        img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .bottom-section {
            max-width: 1200px;
            margin: 40px auto 0;
        }
    </style>
</head>

<body>
    <div class="main-container">
        <!-- Left Column - Calculator -->
        <div class="calculator-container">
            <h1>ELO Inflation Calculator</h1>
            <p>Enter years in the format <strong>YYYY-YYYY</strong> (e.g., 2000-2020):</p>
            <input type="text" id="yearsInput" placeholder="1975-2025">
            <button onclick="calculateInflation()">Calculate</button>
            <div id="result" class="result"></div>
                <div class="image-container">
                    <canvas id="eloChart"></canvas>
                </div>
        </div>

        <!-- Right Column - Image and Text -->
        <div class="image-container">
            <canvas id="inflationChart"></canvas>
            <div class="text-box">
                <h3>Explanation of The Calculation</h3>
                <p>Above is a yearly line graph of annual ELO inflation of top-rated players - that is the percentage annual change in average ELO rating of the top 50 FIDE-Rated players each year. This data is available in xslx format on my github. The R code for the graph can also be found there. As for the calculator, the same technique for inflation was used, but it is calculated live by the calculator as it allows for changes throughout more than just one year. The formula for inflation (I) is calculated by I = 1 - (Average ELO of Year 1 / Average ELO of Year 2) then converted to percentage format. The calculator should not be understood as anything more than an inflation calculator for ELO ratings amongst specifically the top bracket of Chess players. <a href="https://www.2700chess.com/">Data Source(2700 Chess Club)</a></p>
            </div>
        </div>
    </div>

    <div class="bottom-section">
            <div class="text-box">
                <h3>Further Analysis</h3>
                <p>Above is a yearly line graph of the average ELO Ratings for top rated players over the years. There is considerable stagnation during the 1980s, and even noticeable deflation since 2017. This deflation is currently being tackled by FIDE who is introducing new rating floors and using other methods to combat the issue.</p>
            </div>
    </div>

    <script>
        const eloRatings = {
            1975: 2580.20,
            1976: 2573.20,
            1977: 2576.70,
            1978: 2578.10,
            1979: 2578.80,
            1980: 2580.60,
            1981: 2578.00,
            1982: 2580.50,
            1983: 2576.00,
            1984: 2577.70,
            1985: 2577.10,
            1986: 2581.50,
            1987: 2585.70,
            1988: 2597.40,
            1989: 2603.80,
            1990: 2608.80,
            1991: 2620.00,
            1992: 2625.70,
            1993: 2638.60,
            1994: 2638.70,
            1995: 2648.10,
            1996: 2654.40,
            1997: 2657.30,
            1998: 2663.90,
            1999: 2669.42,
            2000: 2673.68,
            2001: 2681.28,
            2002: 2681.84,
            2003: 2683.72,
            2004: 2687.30,
            2005: 2689.00,
            2006: 2694.64,
            2007: 2696.94,
            2008: 2708.36,
            2009: 2717.20,
            2010: 2720.46,
            2011: 2726.76,
            2012: 2730.58,
            2013: 2733.96,
            2014: 2735.56,
            2015: 2736.72,
            2016: 2736.48,
            2017: 2738.22,
            2018: 2738.04,
            2019: 2735.16,
            2020: 2732.64,
            2021: 2731.98,
            2022: 2728.70,
            2023: 2727.70,
            2024: 2725.50,
            2025: 2722.46
        };

        // Inflation data
        const inflationRates = [
            -0.27,0.14,0.05,0.03,0.07,-0.10,0.10,-0.17,0.07,-0.02,0.17,0.16,0.45,0.25,0.19,0.43,0.22,0.49,0.00,0.35,0.24,
            0.11,0.25,0.21,0.16,0.28,0.02,0.07,0.13,0.06,0.21,0.09,0.42,0.33,0.12,0.23,0.14,0.12,0.06,0.04,-0.01,0.06,-0.01,
            -0.11,-0.09,-0.02,-0.12,-0.04,-0.08,-0.11
        ];

        // Calculate inflation and display results
        function calculateInflation() {
            const input = document.getElementById("yearsInput").value;
            const resultDiv = document.getElementById("result");
            
            // Validate input format
            if (!input.includes("-")) {
                resultDiv.innerHTML = "Invalid format. Use YYYY-YYYY.";
                return;
            }

            const years = input.split("-").map(year => parseInt(year.trim()));
            const [year1, year2] = years;

            // Validate years
            if (year1 < 1975 || year2 > 2025 || !eloRatings[year1] || !eloRatings[year2]) {
                resultDiv.innerHTML = "Invalid years. Use years between 1975-2025.";
                return;
            }

            if (year1 > year2) {
                resultDiv.innerHTML = "Sorry, time doesn't go backwards :)";
                return;
            }

            // Calculate inflation
            const x = eloRatings[year1];
            const y = eloRatings[year2];
            const inflation = (1 - (x / y)) * 100;

            // Display result
            resultDiv.innerHTML = `Inflation from ${year1} to ${year2}: <span style="color: blue;">${inflation.toFixed(2)}%</span>`;
        }
    </script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const ctxInflation = document.getElementById('inflationChart').getContext('2d');
            const yearsInflation = Array.from({length: 50}, (_, i) => 1976 + i); // Generate years from 1976 to 2025
            const inflationData = inflationRates;

            new Chart(ctxInflation, {
                type: 'line',
                data: {
                    labels: yearsInflation,
                    datasets: [{
                        label: 'Inflation (%)',
                        data: inflationData,
                        borderColor: 'red',
                        backgroundColor: 'rgba(255, 0, 0, 0.1)',
                        borderWidth: 2,
                        pointRadius: 3,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Year' } },
                        y: { title: { display: true, text: 'Inflation (%)' } }
                    },
                    plugins: {
                        tooltip: { enabled: true },
                        legend: { display: true }
                    }
                }
            });

            const ctxElo = document.getElementById('eloChart').getContext('2d');
            const years = Object.keys(eloRatings);
            const eloData = Object.values(eloRatings);

            new Chart(ctxElo, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Average ELO',
                        data: eloData,
                        borderColor: 'blue',
                        backgroundColor: 'rgba(0, 0, 255, 0.1)',
                        borderWidth: 2,
                        pointRadius: 3,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Year' } },
                        y: { title: { display: true, text: 'Average ELO' } }
                    },
                    plugins: {
                        tooltip: { enabled: true },
                        legend: { display: true }
                    }
                }
            });
        });
    </script>
</body>
</html>
